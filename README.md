# üöï PricePilot - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ü–µ–Ω –¥–ª—è —Ç–∞–∫—Å–∏

**PricePilot** ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è ML-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–∞–∫—Å–∏-–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞—Ö. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π, –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –¥–ª—è –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞–∫–∞–∑–∞.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ML-–º–æ–¥–µ–ª–∏](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-ml-–º–æ–¥–µ–ª–∏)
- [–ü—Ä–∏–∑–Ω–∞–∫–∏ –º–æ–¥–µ–ª–∏](#–ø—Ä–∏–∑–Ω–∞–∫–∏-–º–æ–¥–µ–ª–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å](#–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- [–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏](#–æ–±—É—á–µ–Ω–∏–µ-–º–æ–¥–µ–ª–∏)
- [Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#docker-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
- [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

---

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

**PricePilot** —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É **–±–∏–Ω–∞—Ä–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏**: –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ç–æ–≥–æ, —á—Ç–æ –≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–º–µ—Ç –∑–∞–∫–∞–∑ (`is_done = done`) –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–π —Ü–µ–Ω–µ. –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–æ–∏—Ç **–∫—Ä–∏–≤—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏** –ø–æ –≤—Å–µ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É —Ü–µ–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É, –º–∞–∫—Å–∏–º–∏–∑–∏—Ä—É—é—â—É—é –æ–∂–∏–¥–∞–µ–º—É—é –≤—ã–≥–æ–¥—É (Expected Value).

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –£—á–∏—Ç—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å—Ç–∞–≤–æ–∫ –≤–æ–¥–∏—Ç–µ–ª—è  
‚úÖ **–≠–∫–æ–Ω–æ–º–∏–∫–∞ —Ç–æ–ø–ª–∏–≤–∞**: –†–∞—Å—á–µ—Ç —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ —Å —É—á–µ—Ç–æ–º —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–ø–ª–∏–≤–∞  
‚úÖ **–ó–æ–Ω—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω –Ω–∞ 4 –∑–æ–Ω—ã (–∫—Ä–∞—Å–Ω–∞—è, –∂–µ–ª—Ç–∞—è, –∑–µ–ª–µ–Ω–∞—è)  
‚úÖ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**: –£—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫, –¥–Ω—è –Ω–µ–¥–µ–ª–∏, –ø–∏–∫–æ–≤—ã—Ö —á–∞—Å–æ–≤  
‚úÖ **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π**: –¢–æ—á–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é CalibratedClassifierCV  
‚úÖ **Fast API**: RESTful API —Å JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π  
‚úÖ **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ML-–º–æ–¥–µ–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º: XGBoost + Calibrated Classifier

–ú–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —ç—Ç–∞–ø–æ–≤:

1. **XGBoost Classifier** (200 –¥–µ—Ä–µ–≤—å–µ–≤)
   - `learning_rate`: 0.05
   - `max_depth`: 6
   - `scale_pos_weight`: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å –∫–ª–∞—Å—Å–æ–≤
   - `tree_method`: hist (–±—ã—Å—Ç—Ä—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö)

2. **Calibrated Classifier** (Sigmoid –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞)
   - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ Platt Scaling

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

- **ROC-AUC**: ~0.75-0.85 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–∞–Ω–Ω—ã—Ö)
- **PR-AUC**: ~0.70-0.80
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞**: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω—ã–º —á–∞—Å—Ç–æ—Ç–∞–º

---

## üìä –ü—Ä–∏–∑–Ω–∞–∫–∏ –º–æ–¥–µ–ª–∏

### –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤: **99**

–ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 99 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ 16 –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

#### 1. **–¶–µ–Ω–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (7)**
- `price_bid_local` - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è —Ü–µ–Ω–∞
- `price_start_local` - —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞ –∑–∞–∫–∞–∑–∞
- `price_increase_abs` - –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –Ω–∞—Ü–µ–Ω–∫–∞
- `price_increase_pct` - –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞—Ü–µ–Ω–∫–∏
- `is_price_increased` - —Ñ–ª–∞–≥ –Ω–∞—Ü–µ–Ω–∫–∏
- `price_per_km` - —Ü–µ–Ω–∞ –∑–∞ –∫–∏–ª–æ–º–µ—Ç—Ä
- `price_per_minute` - —Ü–µ–Ω–∞ –∑–∞ –º–∏–Ω—É—Ç—É

#### 2. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (15)**
- `hour_sin`, `hour_cos` - —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫
- `day_sin`, `day_cos` - —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
- `day_of_week`, `day_of_month` - –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
- `is_weekend` - –≤—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å
- `is_morning_peak` - —É—Ç—Ä–µ–Ω–Ω–∏–π —á–∞—Å –ø–∏–∫ (7-9)
- `is_evening_peak` - –≤–µ—á–µ—Ä–Ω–∏–π —á–∞—Å –ø–∏–∫ (17-20)
- `is_peak_hour` - –ª—é–±–æ–π —á–∞—Å –ø–∏–∫
- `is_night` - –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è (22-6)
- `is_lunch_time` - –æ–±–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (12-14)
- `is_month_start` - –Ω–∞—á–∞–ª–æ –º–µ—Å—è—Ü–∞ (–∑–∞—Ä–ø–ª–∞—Ç–∞, –¥–Ω–∏ 1-5)
- `is_month_end` - –∫–æ–Ω–µ—Ü –º–µ—Å—è—Ü–∞ (–¥–Ω–∏ 25+)
- `hour_quartile` - –∫–≤–∞—Ä—Ç–∏–ª—å —á–∞—Å–∞ (0-3)

#### 3. **–ü—Ä–∏–∑–Ω–∞–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞ (12)**
- `distance_in_meters`, `distance_km` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
- `duration_in_seconds`, `duration_min` - –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏
- `avg_speed_kmh` - —Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å
- `is_traffic_jam` - –ø—Ä–æ–±–∫–∞ (<15 –∫–º/—á)
- `is_highway` - —Ç—Ä–∞—Å—Å–∞ (>50 –∫–º/—á)
- `is_short_trip` - –∫–æ—Ä–æ—Ç–∫–∞—è –ø–æ–µ–∑–¥–∫–∞ (<2 –∫–º)
- `is_medium_trip` - —Å—Ä–µ–¥–Ω—è—è –ø–æ–µ–∑–¥–∫–∞ (2-10 –∫–º)
- `is_long_trip` - –¥–ª–∏–Ω–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞ (>10 –∫–º)
- `is_very_short` - –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∞—è (<1 –∫–º)
- `is_very_long` - –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è (>20 –∫–º)

#### 4. **–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø–æ–¥–∞—á–∏ (7)**
- `pickup_in_meters`, `pickup_km` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∞—á–∏
- `pickup_in_seconds` - –≤—Ä–µ–º—è –ø–æ–¥–∞—á–∏
- `pickup_speed_kmh` - —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–¥–∞—á–∏
- `pickup_to_trip_ratio` - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–æ–¥–∞—á–∏ –∫ –ø–æ–µ–∑–¥–∫–µ
- `pickup_time_ratio` - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–¥–∞—á–∏
- `pickup_burden` - –Ω–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–∞—á–∏

#### 5. **–û–±—â–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è (2)**
- `total_distance` - –æ–±—â–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–ø–æ–¥–∞—á–∞ + –ø–æ–µ–∑–¥–∫–∞)
- `total_time` - –æ–±—â–µ–µ –≤—Ä–µ–º—è

#### 6. **–ü—Ä–∏–∑–Ω–∞–∫–∏ –≤–æ–¥–∏—Ç–µ–ª—è (7)**
- `driver_rating` - —Ä–µ–π—Ç–∏–Ω–≥ –≤–æ–¥–∏—Ç–µ–ª—è (1-5)
- `driver_experience_days` - –æ–ø—ã—Ç –≤ –¥–Ω—è—Ö
- `driver_experience_years` - –æ–ø—ã—Ç –≤ –≥–æ–¥–∞—Ö
- `is_new_driver` - –Ω–æ–≤–∏—á–æ–∫ (<30 –¥–Ω–µ–π)
- `is_experienced_driver` - –æ–ø—ã—Ç–Ω—ã–π (>365 –¥–Ω–µ–π)
- `has_perfect_rating` - –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ (5.0)
- `rating_deviation` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç 5.0

#### 7. **–ü—Ä–∏–∑–Ω–∞–∫–∏ –æ—Ç–∫–ª–∏–∫–∞ (4)**
- `response_time_seconds` - –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞
- `response_time_log` - –ª–æ–≥–∞—Ä–∏—Ñ–º –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞
- `is_fast_response` - –±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫ (<10 —Å–µ–∫)
- `is_slow_response` - –º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ (>60 —Å–µ–∫)

#### 8. **–¢–∏–ø —Ç–∞–∫—Å–∏ (3)**
- `taxi_type_economy` - —ç–∫–æ–Ω–æ–º –∫–ª–∞—Å—Å
- `taxi_type_comfort` - –∫–æ–º—Ñ–æ—Ä—Ç –∫–ª–∞—Å—Å
- `taxi_type_business` - –±–∏–∑–Ω–µ—Å –∫–ª–∞—Å—Å

#### 9. **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ (2)**
- `platform_android` - Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `platform_ios` - iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### 10. **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (9)**
- `price_inc_x_distance` - –Ω–∞—Ü–µ–Ω–∫–∞ √ó —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
- `price_inc_x_night` - –Ω–∞—Ü–µ–Ω–∫–∞ √ó –Ω–æ—á—å
- `price_inc_x_peak` - –Ω–∞—Ü–µ–Ω–∫–∞ √ó —á–∞—Å –ø–∏–∫
- `price_inc_x_weekend` - –Ω–∞—Ü–µ–Ω–∫–∞ √ó –≤—ã—Ö–æ–¥–Ω—ã–µ
- `distance_x_night` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ √ó –Ω–æ—á—å
- `distance_x_weekend` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ √ó –≤—ã—Ö–æ–¥–Ω—ã–µ
- `distance_x_peak` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ √ó —á–∞—Å –ø–∏–∫
- `speed_x_peak` - —Å–∫–æ—Ä–æ—Å—Ç—å √ó —á–∞—Å –ø–∏–∫
- `rating_x_price_inc` - —Ä–µ–π—Ç–∏–Ω–≥ √ó –Ω–∞—Ü–µ–Ω–∫–∞
- `experience_x_price_inc` - –æ–ø—ã—Ç √ó –Ω–∞—Ü–µ–Ω–∫–∞

#### 11. **‚õΩ –≠–∫–æ–Ω–æ–º–∏–∫–∞ —Ç–æ–ø–ª–∏–≤–∞ (12)**
- `fuel_cost_rub` - —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–ø–ª–∏–≤–∞ –≤ —Ä—É–±–ª—è—Ö
- `fuel_liters` - —Ä–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ –≤ –ª–∏—Ç—Ä–∞—Ö
- `price_to_fuel_ratio` - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω—ã –∫ —Ç–æ–ø–ª–∏–≤—É
- `min_profitable_price` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- `price_above_min_profitable` - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –º–∏–Ω–∏–º—É–º–∞
- `price_above_min_profitable_pct` - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
- `is_highly_profitable` - –≤—ã—Å–æ–∫–∞—è —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å (>2√ó —Ç–æ–ø–ª–∏–≤–æ)
- `is_profitable` - —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ (>1.3√ó —Ç–æ–ø–ª–∏–≤–æ)
- `is_unprofitable` - –Ω–µ—Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ
- `net_profit` - —á–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å (—Ü–µ–Ω–∞ - —Ç–æ–ø–ª–∏–≤–æ)
- `net_profit_per_km` - –ø—Ä–∏–±—ã–ª—å –Ω–∞ –∫–º
- `net_profit_per_minute` - –ø—Ä–∏–±—ã–ª—å –Ω–∞ –º–∏–Ω—É—Ç—É

#### 12. **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–ø–ª–∏–≤–∞ (3)**
- `fuel_ratio_x_distance` - —Ç–æ–ø–ª–∏–≤–Ω—ã–π –∫–æ—ç—Ñ. √ó —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
- `fuel_ratio_x_peak` - —Ç–æ–ø–ª–∏–≤–Ω—ã–π –∫–æ—ç—Ñ. √ó —á–∞—Å –ø–∏–∫
- `net_profit_x_rating` - –ø—Ä–∏–±—ã–ª—å √ó —Ä–µ–π—Ç–∏–Ω–≥

#### 13. **üë§ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (6)**
- `user_order_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤
- `user_acceptance_rate` - –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–Ω—è—Ç—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- `user_avg_price_ratio` - —Å—Ä–µ–¥–Ω–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ü–µ–Ω—ã
- `user_is_new` - –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (‚â§5 –∑–∞–∫–∞–∑–æ–≤)
- `user_is_vip` - VIP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (‚â•20 –∑–∞–∫–∞–∑–æ–≤)
- `user_is_price_sensitive` - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ü–µ–Ω–µ

#### 14. **üöó –ò—Å—Ç–æ—Ä–∏—è –≤–æ–¥–∏—Ç–µ–ª—è (6)**
- `driver_bid_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞–≤–æ–∫
- `driver_acceptance_rate` - –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–Ω—è—Ç—ã—Ö —Å—Ç–∞–≤–æ–∫
- `driver_avg_bid_ratio` - —Å—Ä–µ–¥–Ω–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å—Ç–∞–≤–∫–∏
- `driver_is_active` - –∞–∫—Ç–∏–≤–Ω—ã–π –≤–æ–¥–∏—Ç–µ–ª—å (‚â•20 —Å—Ç–∞–≤–æ–∫)
- `driver_is_aggressive` - –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ (>1.2√ó)
- `driver_is_flexible` - –≥–∏–±–∫–∏–µ —Å—Ç–∞–≤–∫–∏ (<1.1√ó)

#### 15. **üîó –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏—Å—Ç–æ—Ä–∏–∏ (3)**
- `user_driver_match_score` - —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–æ–¥–∏—Ç–µ–ª—è
- `price_vs_user_avg` - —Ü–µ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥–Ω–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `price_vs_driver_avg` - —Ü–µ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥–Ω–µ–π –≤–æ–¥–∏—Ç–µ–ª—è

#### 16. **üó∫Ô∏è –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–∞—Ä—à—Ä—É—Ç–∞ (1)**
- `route_efficiency` - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–∞—Ä—à—Ä—É—Ç–∞ (–∫–º/–º–∏–Ω)

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- 4 GB RAM –º–∏–Ω–∏–º—É–º (8 GB —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –æ–±—É—á–µ–Ω–∏—è)
- CSV —Ñ–∞–π–ª —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (`simple-train.csv`)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd Hackaton-sinai-PricePilot

# 2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å
python src/train_model.py

# 5. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –∫—ç—à –∏—Å—Ç–æ—Ä–∏–∏
python src/build_history_cache.py

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ API
uvicorn app.main:app --reload
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1:8000`  
Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `http://127.0.0.1:8000/docs`

---

## üì° API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã JWT —Ç–æ–∫–µ–Ω–∞–º–∏.

**–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
```bash
curl -X POST "http://127.0.0.1:8000/auth/token" \
     -H "Content-Type: application/x-www-form-urlencoded" \
     -d "username=demo@example.com&password=demo"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "eyJhbGc...",
  "token_type": "bearer"
}
```

**–î–µ–º–æ-—É—á–µ—Ç–∫–∞:**
- Email: `demo@example.com`
- –ü–∞—Ä–æ–ª—å: `demo`

### –≠–Ω–¥–ø–æ–∏–Ω—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ü–µ–Ω

**POST** `/api/v1/orders/price-recommendation`

**Headers:**
```
Authorization: Bearer <access_token>
Content-Type: application/json
```

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "order_timestamp": 1718558240,
  "distance_in_meters": 3404,
  "duration_in_seconds": 486,
  "pickup_in_meters": 790,
  "pickup_in_seconds": 169,
  "driver_rating": 5.0,
  "platform": "android",
  "price_start_local": 180.0,
  "carname": "LADA",
  "carmodel": "GRANTA",
  "driver_reg_date": "2020-01-15",
  "user_id": 12345,
  "driver_id": 67890
}
```

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- `carname`, `carmodel` - –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ —Ç–∞–∫—Å–∏
- `driver_reg_date` - –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –æ–ø—ã—Ç–∞ –≤–æ–¥–∏—Ç–µ–ª—è
- `user_id`, `driver_id` - –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—ç—à –∏—Å—Ç–æ—Ä–∏–∏)

**–û—Ç–≤–µ—Ç:**
```json
{
  "zones": [
    {
      "zone_id": 1,
      "zone_name": "zone_1_red_low",
      "price_range": {"min": 54.0, "max": 225.14},
      "metrics": {
        "avg_probability_percent": 41.15,
        "avg_normalized_probability_percent": 73.72,
        "avg_expected_value": 55.96
      }
    }
  ],
  "optimal_price": {
    "price": 378.36,
    "probability_percent": 45.3,
    "normalized_probability_percent": 81.16,
    "expected_value": 171.4,
    "zone_id": 3,
    "net_profit": 126.8
  },
  "zone_thresholds": {
    "green_zone": "‚â•70% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è",
    "yellow_low_zone": "50-70% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è",
    "yellow_high_zone": "30-50% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è",
    "red_zone": "<30% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è"
  },
  "fuel_economics": {
    "fuel_cost": 16.83,
    "fuel_liters": 0.31,
    "distance_km": 3.4,
    "fuel_price_per_liter": 55.0,
    "consumption_per_100km": 9.0,
    "min_profitable_price": 21.88,
    "net_profit_from_optimal": 154.52
  },
  "analysis": {
    "start_price": 180.0,
    "max_probability_percent": 55.82,
    "max_probability_price": 54.0,
    "scan_range": {"min": 180.0, "max": 450.0},
    "timestamp": "2025-10-18 16:19:26"
  }
}
```

### –ü—Ä–æ—á–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- **GET** `/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
- **GET** `/` - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
- **GET** `/docs` - Swagger UI
- **GET** `/redoc` - ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üñ•Ô∏è –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**PricePilot** –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π:

- üìç –í–∏–∑—É–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –ø—É–Ω–∫—Ç–∞–º–∏ A –∏ B
- üé® –¶–≤–µ—Ç–æ–≤—ã–µ –∑–æ–Ω—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- ‚ö° –ì—Ä–∞—Ñ–∏–∫ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞–∫–∞–∑–∞
- ‚õΩ –†–∞—Å—á–µ—Ç —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–ø–ª–∏–≤–∞ –∏ –ø—Ä–∏–±—ã–ª–∏
- üéØ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞ —Å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º

**–î–æ—Å—Ç—É–ø:** `http://127.0.0.1:8000/`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export WEBUI_BACKEND_BASE=""              # –±–∞–∑–æ–≤—ã–π URL API
export WEBUI_TOKEN_PATH="/auth/token"    # –ø—É—Ç—å –¥–ª—è —Ç–æ–∫–µ–Ω–∞
export WEBUI_PRICING_PATH="/api/v1/orders/price-recommendation"
export WEBUI_USERNAME="demo@example.com" # –¥–µ–º–æ-—É—á–µ—Ç–∫–∞
export WEBUI_PASSWORD="demo"
```

---

## üéì –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–¢—Ä–µ–±—É–µ—Ç—Å—è CSV —Ñ–∞–π–ª —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–∫–∞–∑–æ–≤:

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- `order_id`, `user_id`, `driver_id`
- `order_timestamp`, `tender_timestamp`
- `distance_in_meters`, `duration_in_seconds`
- `pickup_in_meters`, `pickup_in_seconds`
- `price_start_local`, `price_bid_local`
- `driver_rating`, `driver_reg_date`
- `carname`, `carmodel`, `platform`
- `is_done` (—Ü–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è: `"done"` –∏–ª–∏ `"cancel"`)

### –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è

```bash
python src/train_model.py
```

**–ü—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è:**

1. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `simple-train.csv`
2. üßπ –û—á–∏—Å—Ç–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (—É–¥–∞–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π)
3. üìä –†–∞—Å—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π
4. üîß –°–æ–∑–¥–∞–Ω–∏–µ 99 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
5. üìà –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ train/test (80/20)
6. ü§ñ –û–±—É—á–µ–Ω–∏–µ XGBoost (200 –¥–µ—Ä–µ–≤—å–µ–≤)
7. üé≤ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
8. üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ (`model_enhanced.joblib`)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `model_enhanced.joblib` - –æ–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
- `feature_names.joblib` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
- –ú–µ—Ç—Ä–∏–∫–∏: ROC-AUC, PR-AUC, –≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

### –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—ç—à–∞ –∏—Å—Ç–æ—Ä–∏–∏

–î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π:

```bash
python src/build_history_cache.py
```

**–°–æ–∑–¥–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã:**
- `user_history.joblib` - –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `driver_history.joblib` - –∏—Å—Ç–æ—Ä–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–π

---

## üê≥ Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker Compose

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up --build

# –í —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`

### –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞ Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t pricepilot .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 \
  -v $(pwd)/simple-train.csv:/app/simple-train.csv:ro \
  -v $(pwd)/model_enhanced.joblib:/app/model_enhanced.joblib:ro \
  pricepilot
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```yaml
environment:
  - SECRET_KEY=your-secret-key-here
  - ACCESS_TOKEN_EXPIRE_MINUTES=60
  - TEST_USER_EMAIL=demo@example.com
  - TEST_USER_PASSWORD=demo
  - PRICING_ML_MODULE=src.recommend_price
  - PRICING_ML_CALLABLE=recommend_price
  - REBUILD_CACHE=0  # 1 –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –∫—ç—à–∞
```

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è

‚è±Ô∏è **~4 —Å–µ–∫—É–Ω–¥—ã** –Ω–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å

**Breakdown:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ (–ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ): ~500 –º—Å
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤: ~100 –º—Å
- Batch prediction (500 —Ç–æ—á–µ–∫): ~3000 –º—Å
- –ê–Ω–∞–ª–∏–∑ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞: ~400 –º—Å

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ Batch prediction –≤–º–µ—Å—Ç–æ loop
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Å `@lru_cache`
- ‚úÖ –ü—Ä–µ–¥—Ä–∞—Å—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–≤–æ–¥–∏—Ç–µ–ª–µ–π
- ‚úÖ –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å NumPy

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º

- **RAM**: 512 MB (min) / 1 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **CPU**: 0.25 cores (min) / 0.5 cores (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **Disk**: 100 MB –¥–ª—è –º–æ–¥–µ–ª–∏ + –∫—ç—à–µ–π

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö worker'–æ–≤ Uvicorn
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Nginx –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Redis
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å Celery

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–µ—Å—Ç ML-–º–æ–¥–µ–ª–∏
python test_price_recommendation.py

# –¢–µ—Å—Ç API —á–µ—Ä–µ–∑ mock frontend
python scripts/mock_frontend.py
```

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞

```python
from src.recommend_price import recommend_price

order = {
    "order_timestamp": 1588341000,
    "distance_in_meters": 3404,
    "duration_in_seconds": 486,
    "pickup_in_meters": 790,
    "pickup_in_seconds": 169,
    "driver_rating": 5.0,
    "platform": "android",
    "price_start_local": 180.0
}

result = recommend_price(order, output_json=False)
print(f"–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: {result['optimal_price']['price']}‚ÇΩ")
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ML-–º–æ–¥—É–ª—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export PRICING_ML_MODULE=src.recommend_price      # –º–æ–¥—É–ª—å —Å ML
export PRICING_ML_CALLABLE=recommend_price        # —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
export PRICING_MODEL_PATH=model_enhanced.joblib   # –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏
export PRICING_ML_ALLOW_STUB_FALLBACK=false       # fallback –Ω–∞ –∑–∞–≥–ª—É—à–∫—É
export PRICING_SCAN_POINTS=500                    # —Ç–æ—á–µ–∫ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```

---

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Hackaton-sinai-PricePilot/
‚îú‚îÄ‚îÄ app/                      # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª API
‚îÇ   ‚îú‚îÄ‚îÄ services.py          # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py           # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth.py              # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ config.py            # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ src/                      # ML –º–æ–¥—É–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ train_model.py       # –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ recommend_price.py   # –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ü–µ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ build_history_cache.py  # –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—ç—à–∞
‚îú‚îÄ‚îÄ webui/                    # –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îÇ   ‚îî‚îÄ‚îÄ static/
‚îÇ       ‚îú‚îÄ‚îÄ css/style.css
‚îÇ       ‚îî‚îÄ‚îÄ js/app.js
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ mock_frontend.py     # —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ Dockerfile               # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker Compose –∫–æ–Ω—Ñ–∏–≥
‚îú‚îÄ‚îÄ requirements.txt         # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ model_enhanced.joblib    # –æ–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ user_history.joblib      # –∫—ç—à –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ driver_history.joblib    # –∫—ç—à –∏—Å—Ç–æ—Ä–∏–∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π
‚îî‚îÄ‚îÄ README.md                # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## ü§ù –í–∫–ª–∞–¥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è **Hackathon Sinai**.

### –ê–≤—Ç–æ—Ä—ã
- ML Pipeline & Feature Engineering
- FastAPI Backend
- Web UI & Visualization

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Backend**: FastAPI, Uvicorn, Pydantic
- **ML**: XGBoost, scikit-learn, pandas, numpy
- **Frontend**: Vanilla JS, CSS3
- **Deploy**: Docker, Docker Compose
- **Auth**: JWT (PyJWT)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π –≤ —Ä–∞–º–∫–∞—Ö —Ö–∞–∫–∞—Ç–æ–Ω–∞.

---

## üéØ Roadmap

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª-—Ç–∞–π–º –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] Reinforcement Learning –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
- [ ] –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

---

**üöÄ PricePilot** - –£–º–Ω–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ç–∞–∫—Å–∏!
